import java.util.ArrayList;
import java.util.List;
import models.*;
import services.GestionFarmaciaService;

public class Main {
    public static void main(String[] args) {
        // Crear instancias de medicamentos
        Medicamento paracetamol = new Medicamento("Paracetamol", 50);
        Medicamento ibuprofeno = new Medicamento("Ibuprofeno", 30);
        Medicamento aspirina = new Medicamento("Aspirina", 20);

        // Crear una droguería y agregar medicamentos
        Drogueria drogueria = new Drogueria();
        drogueria.agregarMedicamento(paracetamol);
        drogueria.agregarMedicamento(ibuprofeno);
        drogueria.agregarMedicamento(aspirina);

        // Crear una farmacia
        Farmacia farmacia = new Farmacia(drogueria);

        // Agregar algunos medicamentos a la farmacia
        farmacia.agregarMedicamento(paracetamol, 20);
        farmacia.agregarMedicamento(ibuprofeno, 10);

        // Crear una receta con algunos medicamentos
        List<Medicamento> medicamentosReceta = new ArrayList<>();
        medicamentosReceta.add(paracetamol);
        medicamentosReceta.add(ibuprofeno);
        medicamentosReceta.add(aspirina);
        Medico medico = new Medico("Dr. García", "Cardiólogo", null, null); // Reemplaza null con una lista de ObraSocial y una instancia de Especialidad si es necesario
        Receta receta = new Receta(medicamentosReceta, medico);

        // Crear una instancia de GestionFarmaciaService
        GestionFarmaciaService gestionFarmaciaService = GestionFarmaciaService.getInstancia(farmacia, drogueria);

        // Verificar la receta y reponer medicamentos si es necesario
        System.out.println("Verificando receta...");
        gestionFarmaciaService.analizarReceta(receta);

        // Comprar la receta
        System.out.println("\nComprando receta...");
        gestionFarmaciaService.comprarReceta(receta);

        // Verificar el stock de la farmacia después de la compra
        System.out.println("\nStock de la farmacia después de la compra:");
        for (Medicamento medicamento : farmacia.getStockMedicamentos().keySet()) {
            int cantidad = farmacia.getStockMedicamentos().get(medicamento);
            System.out.println(medicamento.getNombre() + ": " + cantidad);
        }
    }
}
